<h1>Report Categories</h1>

<div class="card card-container">
  <div class="card-body">
    <h5 class="card-title"><strong>Case Contacts Report</strong></h5>
    <p class="card-text">
      This CSV is a listing of all fields for the case contacts of all volunteers. Select the start
      and end date.
    </p>

    <hr>

    <%= form_with url: case_contact_reports_path(format: :csv), method: :get, local: true do |f| %>
      <div class="field form-group">
        <label><strong>Starting From:</strong></label>
        <%= f.date_field :start_date, class: "form-control", value: 1.month.ago.to_date %>
      </div>

      <div class="field form-group">
        <label><strong>Ending At:</strong></label>
        <%= f.date_field :end_date, class: "form-control", value: Date.today.to_date %>
      </div>

      <% if current_user&.casa_admin? || current_user&.supervisor? %>
        <div class="field form-group">
          <label><strong>Assigned To:</strong></label>
          <%= f.collection_select :supervisor_ids, Supervisor.where(casa_org: current_user.casa_org), :id, :display_name, { include_hidden: false, prompt: "-Select Supervisors-" }, { class: "form-control", multiple: true } %>
        </div>

        <div class="field form-group">
          <label><strong>Volunteers</strong></label>
          <%= f.collection_select :creator_ids, Volunteer.where(casa_org: current_user.casa_org), :id, :display_name, { include_hidden: false, prompt: "-Select Volunteers-" }, { class: "form-control", multiple: true } %>
        </div>

        <div class="field form-group">
          <label><strong>Contact Type:</strong></label>
          <%= f.collection_select :contact_type_ids, ContactType.for_organization(current_user.casa_org), :id, :name, { include_hidden: false, prompt: "-Select Contact Types-" }, { class: "form-control", multiple: true } %>
        </div>

        <div class="field form-group">
          <label><strong>Contact Type Group:</strong></label>
          <%= f.collection_select :contact_type_group_ids, ContactTypeGroup.for_organization(current_user.casa_org), :id, :name, { include_hidden: false, prompt: "-Select Contact Type Groups-" }, { class: "form-control", multiple: true } %>
        </div>

        <div class="field form-group">
          <label><strong>Want Driving Reimbursement:</strong></label>
          <%= f.hidden_field :want_driving_reimbursement, { value: nil } %>
          <div class="form-check">
            <%= check_box_tag :want_driving_reimbursement, false %>
            <label class="form-check-label">No</label>
          </div>
          <div class="form-check">
            <%= check_box_tag :want_driving_reimbursement, true %>
            <label class="form-check-label">Yes</label>
          </div>
        </div>

        <div class="field form-group">
          <label><strong>Contact Made:</strong></label>
          <%= f.hidden_field :contact_made, { value: nil } %>
          <div class="form-check">
            <%= check_box_tag :contact_made, false %>
            <label class="form-check-label">No</label>
          </div>
          <div class="form-check">
            <%= check_box_tag :contact_made, true %>
            <label class="form-check-label">Yes</label>
          </div>
        </div>

        <div class="field form-group">
          <label><strong>Transition Aged Youth:</strong></label>
          <%= f.hidden_field :has_transitioned, { value: nil } %>
          <div class="form-check">
            <%= check_box_tag :has_transitioned, false %>
            <label class="form-check-label">No</label>
          </div>
          <div class="form-check">
            <%= check_box_tag :has_transitioned, true %>
            <label class="form-check-label">Yes</label>
          </div>
        </div>
      <% end %>

      <%= f.submit "Download Report", class: "btn btn-primary", data: { disable_with: false } %>
    <% end %>

  </div>
</div>
